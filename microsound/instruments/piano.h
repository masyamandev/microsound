/*
 * Author: Aleksandr Maksymenko aka masyaman
 */

#include "common/expneg.h"

const int8_t pianoWaveTable[] PROGMEM = {
		0, 1, 3, 7, 12, 17, 24, 31, 38, 44, 50, 55, 58, 60, 60, 59,
		56, 52, 49, 45, 43, 42, 43, 45, 48, 50, 51, 52, 51, 48, 45, 40,
		36, 31, 26, 21, 16, 11, 6, 3, 0, -1, -3, -5, -8, -11, -15, -19,
		-24, -28, -31, -34, -35, -36, -34, -30, -26, -20, -15, -10, -6, -4, -2, 4,
		10, 17, 21, 25, 27, 29, 31, 32, 32, 31, 29, 27, 24, 23, 24, 26,
		30, 34, 38, 41, 44, 47, 50, 54, 58, 65, 72, 80, 88, 96, 104, 111,
		118, 122, 125, 127, 125, 123, 119, 115, 109, 104, 98, 92, 86, 80, 75, 70,
		67, 64, 61, 58, 55, 50, 46, 42, 38, 35, 33, 32, 32, 31, 30, 29,
		28, 25, 22, 18, 13, 7, 0, -5, -10, -13, -13, -12, -10, -8, -6, -5,
		-6, -8, -12, -17, -24, -31, -38, -44, -48, -50, -51, -50, -48, -45, -41, -37,
		-33, -30, -27, -26, -26, -28, -30, -33, -36, -40, -43, -46, -50, -53, -56, -59,
		-61, -64, -67, -70, -72, -73, -73, -72, -71, -68, -64, -60, -55, -50, -45, -41,
		-39, -38, -37, -37, -38, -39, -40, -41, -41, -42, -43, -43, -45, -47, -49, -53,
		-58, -62, -67, -71, -73, -74, -74, -71, -66, -59, -52, -44, -37, -31, -27, -24,
		-24, -26, -29, -34, -40, -46, -53, -59, -65, -68, -70, -69, -66, -62, -56, -50,
		-44, -39, -36, -33, -31, -29, -26, -22, -17, -12, -8, -5, -3, -2, -1, -1
		};

//// Removed high frequency harmonics
//const int8_t pianoWaveTable[] PROGMEM = {
//		8, 10, 13, 16, 18, 20, 22, 24, 27, 29, 31, 32, 34, 36, 37, 38,
//		39, 40, 41, 42, 42, 42, 42, 41, 40, 39, 37, 36, 34, 32, 29, 27,
//		24, 22, 19, 17, 14, 12, 10, 8, 5, 3, 1, 0, -1, -3, -4, -6,
//		-7, -7, -7, -7, -7, -7, -6, -6, -5, -4, -3, -2, -1, 0, 0, 1,
//		3, 5, 7, 9, 11, 14, 16, 19, 21, 24, 27, 30, 33, 36, 39, 43,
//		46, 50, 53, 56, 59, 62, 65, 67, 70, 72, 74, 76, 77, 79, 81, 82,
//		83, 84, 85, 86, 86, 86, 86, 86, 86, 85, 84, 83, 81, 80, 78, 75,
//		73, 70, 67, 64, 60, 57, 53, 49, 45, 42, 38, 35, 32, 29, 26, 24,
//		22, 19, 17, 15, 12, 10, 7, 4, 1, 0, -3, -5, -8, -10, -12, -14,
//		-16, -18, -20, -21, -22, -24, -25, -26, -27, -28, -28, -29, -31, -32, -33, -35,
//		-37, -38, -40, -42, -44, -45, -46, -47, -48, -49, -49, -50, -50, -50, -50, -50,
//		-50, -50, -50, -51, -51, -51, -52, -52, -52, -52, -52, -52, -52, -52, -52, -52,
//		-52, -52, -52, -52, -52, -53, -53, -52, -52, -52, -51, -51, -50, -49, -49, -48,
//		-48, -47, -47, -47, -47, -47, -48, -48, -49, -50, -51, -51, -52, -53, -53, -53,
//		-53, -52, -51, -50, -49, -48, -46, -45, -43, -41, -40, -38, -37, -36, -35, -34,
//		-34, -33, -32, -31, -30, -28, -26, -23, -20, -17, -13, -10, -6, -2, 1, 4,
//		};


void playPiano(waveChannel* channel, uint8_t data) {
	setChannelWave(pianoWaveTable, data);
	setChannelVolume(expNegTable, 4);
	channel->currentVolume = channel->instrumentVolume;
}
